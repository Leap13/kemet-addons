!function(o){var t={init:function(){o(window).on("hashchange",t.tabs),o(window).on("ready",t.tabs()),o(document).on("click",".kemet-save-ajax",t.saveOptions),o(document).on("click",".kemet-reset-options",t.resetOptions),o(document).on("click",".kmt-plugin",t.plugin),o(document).on("click",".kemet-enable-all-options",t.enableAllOptions),o(document).on("click",".kemet-disable-all-options",t.disableAllOptions),o(document).on("click",".kfw--switcher",t.switcher),o(document).on("ready",t.stickyFooter()),o(window).on("scroll",t.stickyFooter),o(window).on("kemet-tab-changed",t.stickyFooter)},plugin:function(){var a=o(this),e=a.data("status");switch(o(this).addClass("updating-message"),e){case"install":var t=a.data("url-install"),n="Installin";break;case"activate":t=a.data("url-activate"),n="Activating";break;case"deactivate":t=a.data("url-deactivate"),n="Deactivating"}o.ajax({url:t,type:"GET",beforeSend:function(){a.text(n)}}).done(function(t){"install"==e?o.ajax({url:a.data("url-activate"),type:"GET",beforeSend:function(){a.text("Activating")}}).done(function(t){window.location.reload()}):window.location.reload()})},tabs:function(){var t=window.location.hash.match(new RegExp("tab=([^&]*)"));tab=null!=t?(tabItem=o("."+t[1]+"-tab"),o("#"+t[1])):(tabItem=o(".kemet-panel-tabs").find("li:first-child"),o(".kemet-panel-tabs-content > div:first-child")),tabItem.addClass("active").siblings().removeClass("active"),tab.addClass("active").siblings().removeClass("active"),o(document).trigger("kemet-tab-changed",tab)},switcher:function(){var t=o(this).find("input"),a=0==t.val()?1:0;o(this).toggleClass("kfw--active"),t.val(a),t.trigger("change")},saveOptions:function(){if(!o(this).hasClass("updating-message")){var t=o(this),a=t.data("class"),e=t.data("id"),n=o("#"+e+" input"),i={};o(this).addClass("updating-message"),o.each(n,function(){var t=o(this),a=t.data("depend-id");i[a]=t.val()}),o.ajax({url:window.ajaxurl,type:"POST",data:{action:"kemet-panel-save-options",class:a,options:i,nonce:kemetPanelVars.nonce}}).done(function(t){t.success&&window.location.reload()})}},resetOptions:function(){if(!o(this).hasClass("updating-message")){var t=o(this).data("class");o(this).addClass("updating-message"),o.ajax({url:window.ajaxurl,type:"POST",data:{action:"kemet-panel-reset-options",class:t,nonce:kemetPanelVars.nonce}}).done(function(t){t.success&&window.location.reload()})}},enableAllOptions:function(){if(!o(this).hasClass("updating-message")){var e=o(this),t=e.data("class"),a=e.data("id"),n=o("#"+a+" .kfw--switcher input"),i={};o(this).addClass("updating-message"),o.each(n,function(){var t=o(this).data("depend-id");i[t]=1}),o.ajax({url:window.ajaxurl,type:"POST",data:{action:"kemet-panel-enable-all",class:t,options:i,nonce:kemetPanelVars.nonce}}).done(function(t){if(t.success){e.removeClass("updating-message");var a=o(".kfw--switcher");o.each(a,function(){var t=o(this);t.addClass("kfw--active"),t.find("input").val(1),t.find("input").trigger("input")})}})}},disableAllOptions:function(){if(!o(this).hasClass("updating-message")){var e=o(this),t=e.data("class"),a=e.data("id"),n=o("#"+a+" .kfw--switcher input"),i={};o(this).addClass("updating-message"),o.each(n,function(){var t=o(this).data("depend-id");i[t]=0}),o.ajax({url:window.ajaxurl,type:"POST",data:{action:"kemet-panel-disable-all",class:t,options:i,nonce:kemetPanelVars.nonce}}).done(function(t){if(t.success){e.removeClass("updating-message");var a=o(".kfw--switcher");o.each(a,function(){var t=o(this);t.removeClass("kfw--active"),t.find("input").val(0),t.find("input").trigger("input")})}})}},stickyFooter:function(){var t=o(document).find(".kemet-panel-footer");o.each(t,function(){var t=o(this),a=t.find(".kemet-panel-footer-inner"),e=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),n=o(window).scrollTop()+o(window).height(),i=t.offset().top-n,s=Math.max(document.documentElement.clientWidth,window.innerWidth||0);0<=i&&782<s?(a.css({width:t.outerWidth()-e}),t.css({height:t.outerHeight()}).addClass("kemet-sticky")):(a.removeAttr("style"),t.removeAttr("style").removeClass("kemet-sticky"))})}};o(document).ready(function(){t.init()})}(jQuery,(window,document));