!function(l){"use strict";var e=l(".kmt-woo-filter"),t=l("#kmt-off-canvas-wrap"),a=l(".kmt-off-canvas-sidebar");l(document).off("click",".kmt-off-canvas-overlay, .kmt-close-filter").on("click",".kmt-off-canvas-overlay, .kmt-close-filter",function(e){e.preventDefault(),t.removeClass("side-off-canvas-filter"),a.removeClass("side-off-canvas-filter")}),e.click(function(e){e.preventDefault(),t.addClass("side-off-canvas-filter"),a.addClass("side-off-canvas-filter")});function o(){var e=l("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").find(".qty");0<e.length&&"date"!==e.prop("type")&&"hidden"!==e.prop("type")&&(e.parent().addClass("buttons_added"),e.before('<a href="javascript:void(0)" class="minus" >-</a>'),e.after('<a href="javascript:void(0)" class="plus" >+</a>'),l(".plus, .minus").unbind("click"),l("form.cart , .woocommerce-cart-form").on("click",".plus, .minus",function(e){e.preventDefault();var t=l(this).closest(".quantity , td.product-quantity").find(".qty"),a=parseFloat(t.val()),o=parseFloat(t.attr("max")),s=parseFloat(t.attr("min")),e=parseFloat(t.attr("step"));a&&""!==a&&"NaN"!==a||(a=0),""!==o&&"NaN"!==o||(o=""),""!==s&&"NaN"!==s||(s=0),"any"!==e&&""!==e&&void 0!==e&&"NaN"!==parseFloat(e)||(e=1),l(this).is(".plus")?o&&o<=a?t.val(o):t.val(a+e):s&&a<=s?t.val(s):1<=a&&t.val(a-e),t.trigger("change")}))}var s={init:function(){var a=this,e="",t=l(".kmt-toolbar .shop-list-style");""==(e=kemet.is_shop?a.getCookie("kemet_shop_layout"):a.getCookie("kemet_single_product_layout"))||"undefined"==e||kemet.in_customizer||a.defaultStyle(e),t.find("a").click(function(e){var t=l(this);e.preventDefault(),a.loadAjax(t)})},loadAjax:function(t){if(!t.hasClass("active")){var a=l("body"),o=t.data("layout"),s=t.siblings("a").data("layout"),i=l(".kmt-woocommerce-container .products"),e=kemet.shop_load_layout_style||"",n="";switch(o){case"hover-style":n="kemet_hover_style_post_ajax";break;case"shop-grid":n="kemet_product_default_style";break;case"shop-list":n="kemet_list_post_ajax"}e={action:n,query:kemet.query_vars,nonce:e};t.addClass("active"),t.siblings().removeClass("active"),l.ajax({url:kemet.ajax_url,data:e,type:"POST",beforeSend:function(e){i.addClass("load-ajax")},success:function(e){e&&(i.html(e),t.addClass("active"),t.siblings().removeClass("active"),a.addClass(o),a.removeClass(s),i.removeClass("load-ajax")),Cookies.set("kemet_shop_layout",o,{expires:.1,path:"/"})}})}},getCookie:function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),o=0;o<a.length;o++){for(var s=a[o];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""},defaultStyle:function(e){var t=e,a=l("body");switch(l(".kmt-toolbar").find("a").each(function(){var e=l(this);e.data("layout")==t&&(e.addClass("active"),e.siblings().removeClass("active"),0)}),t){case"hover-style":a.removeClass("shop-grid shop-list");break;case"shop-grid":a.removeClass("hover-style shop-list");break;case"shop-list":a.removeClass("hover-style shop-grid")}a.addClass(t)}};l(function(){s.init()}),l(window).ready(function(){o()}),l(document).ajaxComplete(function(){o()});var i,n,r,c,d,f,u,m,p,v,h;function k(e){u.show(),m.hide();e={action:"kemet_infinite_scroll",page_no:e,nonce:h,query_vars:kemet.query_vars};l.post(d,e,function(e){var t=l(e),e=l("#main > .kmt-woocommerce-container ul.products");u.hide(),m.show(),e.append(t),r<c&&(m.hide(),u.hide(),p.show()),f=!0})}l("body").hasClass("archive")&&l("body").hasClass("woocommerce")&&(n=kemet.pagination_style,r=parseInt(kemet.shop_infinite_total)||"",c=parseInt(kemet.shop_infinite_count)||"",d=kemet.ajax_url||"",f=!0,u=l(".kmt-woo-infinite-scroll-dots"),m=l(".woo-load-more-text"),p=l(".woo-infinite-scroll-end-msg"),v=l(".kmt-toolbar .shop-list-style"),h=kemet.shop_infinite_nonce||"","button"==kemet.woo_infinite_scroll_style&&u.hide(),v.find("a").on("click",function(e){l(this).hasClass("active")||(c=parseInt(kemet.shop_infinite_count)||"",p.hide())}),typeof n&&"infinite-scroll"==n&&("undefined"!=typeof wp&&void 0!==wp.customize||("dots"==kemet.woo_infinite_scroll_style?0<l("#main").find(".product:last").length&&(i=jQuery(window).outerHeight()/1.25,l(window).scroll(function(){if(l(window).scrollTop()+i>=l("#main").find(".product:last").offset().top){if(r<c)return!1;1==f&&(k(c),c++,f=!1)}})):l(".woo-load-more-text").click(function(){return!(r<c)&&void(1==f&&(k(c),c++,f=!1))}))))}(jQuery);