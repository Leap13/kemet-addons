!function(u){"use strict";var e=u(".kmt-woo-filter"),t=u("#kmt-off-canvas-wrap"),o=u(".kmt-off-canvas-sidebar");u(document).off("click",".kmt-off-canvas-overlay, .kmt-close-filter").on("click",".kmt-off-canvas-overlay, .kmt-close-filter",function(e){e.preventDefault(),t.removeClass("side-off-canvas-filter"),o.removeClass("side-off-canvas-filter")}),e.click(function(e){e.preventDefault(),t.addClass("side-off-canvas-filter"),o.addClass("side-off-canvas-filter")});var a={init:function(){var o=this,e="",t=u(".kmt-toolbar .shop-list-style");""==(e=kemet.is_shop?o.getCookie("kemet_shop_layout"):o.getCookie("kemet_single_product_layout"))||"undefined"==e||kemet.in_customizer||o.defaultStyle(e),t.find("a").click(function(e){var t=u(this);e.preventDefault(),o.loadAjax(t)})},loadAjax:function(t){if(!t.hasClass("active")){var o=u("body"),a=t.data("layout"),i=u(".woo-load-more-text"),s=t.siblings("a").data("layout"),n=u(".kmt-woocommerce-container .products"),e=kemet.shop_load_layout_style||"",l="";switch(a){case"hover-style":l="kemet_hover_style_post_ajax";break;case"shop-grid":l="kemet_product_default_style";break;case"shop-list":l="kemet_list_post_ajax"}var r={action:l,query:kemet.query_vars,nonce:e};t.addClass("active"),t.siblings().removeClass("active"),u.ajax({url:kemet.ajax_url,data:r,type:"POST",beforeSend:function(e){n.addClass("load-ajax")},success:function(e){e&&(n.html(e),t.addClass("active"),t.siblings().removeClass("active"),i.length&&i.show(),o.addClass(a),o.removeClass(s),n.removeClass("load-ajax")),Cookies.set("kemet_shop_layout",a,{expires:.1,path:"/"})}})}},getCookie:function(e){for(var t=e+"=",o=decodeURIComponent(document.cookie).split(";"),a=0;a<o.length;a++){for(var i=o[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},defaultStyle:function(e){var t=e,o=u("body");switch(u(".kmt-toolbar").find("a").each(function(){var e=u(this);e.data("layout")==t&&(e.addClass("active"),e.siblings().removeClass("active"),0)}),t){case"hover-style":o.removeClass("shop-grid shop-list");break;case"shop-grid":o.removeClass("hover-style shop-list");break;case"shop-list":o.removeClass("hover-style shop-grid")}o.addClass(t)}},i=function(){var e=u("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").find(".qty");0<e.length&&"date"!==e.prop("type")&&"hidden"!==e.prop("type")&&(e.parent().addClass("buttons_added"),e.before('<a href="javascript:void(0)" class="minus" >-</a>'),e.after('<a href="javascript:void(0)" class="plus" >+</a>'),u(".plus, .minus").unbind("click"),u("form.cart , .woocommerce-cart-form").on("click",".plus, .minus",function(e){e.preventDefault();var t=u(this).closest(".quantity , td.product-quantity").find(".qty"),o=parseFloat(t.val()),a=parseFloat(t.attr("max")),i=parseFloat(t.attr("min")),s=parseFloat(t.attr("step"));o&&""!==o&&"NaN"!==o||(o=0),""!==a&&"NaN"!==a||(a=""),""!==i&&"NaN"!==i||(i=0),"any"!==s&&""!==s&&void 0!==s&&"NaN"!==parseFloat(s)||(s=1),u(this).is(".plus")?a&&a<=o?t.val(a):t.val(o+s):i&&o<=i?t.val(i):1<=o&&t.val(o-s),t.trigger("change")}))};u(function(){a.init()}),u(window).ready(function(){i()}),u(document).ajaxComplete(function(){i()});u("body").hasClass("archive")&&u("body").hasClass("woocommerce")&&function(){var e=kemet.pagination_style,a=parseInt(kemet.shop_infinite_total)||"",i=parseInt(kemet.shop_infinite_count)||"",o=kemet.ajax_url||"",s=!0,n=u(".kmt-woo-infinite-scroll-dots"),l=u(".woo-load-more-text"),r=u(".woo-infinite-scroll-end-msg"),t=u(".kmt-toolbar .shop-list-style"),c=kemet.shop_infinite_nonce||"";function d(e){n.show(),l.hide();var t={action:"kemet_infinite_scroll",page_no:e,nonce:c,query_vars:kemet.query_vars};u.post(o,t,function(e){var t=u(e),o=u("#main > .kmt-woocommerce-container ul.products");n.hide(),l.show(),o.append(t),a<i&&(l.hide(),n.hide(),r.show()),s=!0})}if("button"==kemet.woo_infinite_scroll_style&&n.hide(),t.find("a").on("click",function(e){u(this).hasClass("active")||(i=parseInt(kemet.shop_infinite_count)||"",r.hide())}),""!=typeof e&&"infinite-scroll"==e){if("undefined"!=typeof wp&&void 0!==wp.customize)return;if("dots"==kemet.woo_infinite_scroll_style){if(0<u("#main").find(".product:last").length){var f=jQuery(window).outerHeight()/1.25;u(window).scroll(function(){if(u(window).scrollTop()+f>=u("#main").find(".product:last").offset().top){if(a<i)return!1;1==s&&(d(i),i++,s=!1)}})}}else u(".woo-load-more-text").click(function(){if(a<i)return!1;1==s&&(d(i),i++,s=!1)})}}();var s=function(){var e=u(".kmt-gallary-vertical"),t=e.find(".flex-control-nav");if(0<e.length)if(768<u(window).width()){var o=e.find(".flex-viewport").height();o+50<t.height()&&t.css({"max-height":o+"px","overflow-y":"scroll"})}else t.css({"max-height":"","overflow-y":""})};s(),u(window).on("load",function(){setTimeout(function(){s()},500)}),u(window).on("resize",function(){s()})}(jQuery);