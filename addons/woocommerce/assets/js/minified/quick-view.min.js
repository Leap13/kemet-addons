!function(l){if("undefined"==typeof kemet)return;KmtQuickView={init:function(){this.bind(),this.quickViewStyle()},bind:function(){l(document).off("click",".kmt-quick-view , .kmt-qv-on-list , .kmt-qv-on-image, .kmt-qv-icon, .kmt-quickview-icon").on("click",".kmt-quick-view, .kmt-qv-on-list , .kmt-qv-on-image , .kmt-qv-icon, .kmt-quickview-icon",KmtQuickView.openModel),l(document).off("click",".kmt-qv-close , .kmt-close-qv").on("click",".kmt-qv-close , .kmt-close-qv",KmtQuickView.closeModel),l(document).on("keyup",KmtQuickView.EscKeypress),l(document).on("kemet-quick-view-loaded",KmtQuickView.resizeModel)},quickViewStyle:function(){l("#kmt-qv-content").css({"max-width":parseFloat(l(window).width())-150,"max-height":parseFloat(l(window).height())-150})},openModel:function(t){t.preventDefault();var e=l(this).data("product_id"),m=l("#kmt-qv-wrap"),c=l(".kmt-qv-overlay"),a=l("#kmt-qv-content");c.addClass("visible"),c.addClass("loading"),l.ajax({url:kemet.ajax_url,type:"POST",dataType:"html",data:{action:"kemet_load_quick_view",product_id:e}}).done(function(t){var e=l("html").innerWidth();l("html").css("overflow","hidden");var i=l("html").innerWidth();l("html").css("margin-right",i-e),l("html").addClass("kmt-qv-open"),a.html(t),m.fadeIn(),m.addClass("is-visible");var n=a.find(".kmt-qv-image"),o=a.find(".variations_form");0<o.length&&(o.trigger("check_variations"),o.trigger("reset_image"),o.wc_variation_form(),o.find("select").change()),1<n.find("li").length&&n.flexslider(),c.removeClass("loading"),setTimeout(function(){l(document).trigger("kemet-quick-view-loaded")},100)})},resizeModel:function(){var t=window.matchMedia("(max-width: 767px)").matches?"auto":parseFloat(l("#kmt-qv-content .images").find(".woocommerce-product-gallery__image").outerHeight()),e=window.matchMedia("(max-width: 767px)").matches?"auto":parseFloat(l("#kmt-qv-content").outerHeight());l("#kmt-qv-content").removeAttr("style"),0<t?l("#kmt-qv-content .entry-summary , #kmt-qv-content").css({"max-height":t}):l("#kmt-qv-content .entry-summary, #kmt-qv-content").css({"max-height":e})},closeModel:function(t){t.preventDefault();var e=l("#kmt-qv-wrap"),i=l(".kmt-qv-overlay"),n=l("#kmt-qv-content");l("html").css({overflow:"","margin-right":""}),l("html").removeClass("kmt-qv-open"),e.fadeOut(),e.removeClass("is-visible"),i.removeClass("visible"),setTimeout(function(){n.html("")},600)},EscKeypress:function(t){t.preventDefault(),27===t.keyCode&&KmtQuickView.closeModel(t)}},l(function(){KmtQuickView.init()})}(jQuery);