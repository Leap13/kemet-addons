!function(c){document.addEventListener("KemetInitOptionsMeta",function(){var n=c(document).find(".kmt-post-options"),t=kemetAddons.hooks_descriptions,e=n.find(".kmt-hooks-select"),o=e.val(),i=n.find("#hook-action .description");""!=t[o]&&void 0!==t[o]&&i.html("Action to add your content or snippet "+t[o]+"."),e.change(function(){var e=c(this).val(),o=t[e];""!=t[e]&&void 0!==t[e]?i.html("Action to add your content or snippet "+o+"."):i.html("")});function s(n,e){c.each(e,function(e,o){var t=n;postID=o.toString(),postID.includes(",")?(o=postID.split(","),c.each(o,function(e,o){c.post(kemetAddons.ajax_url,{post_id:o,action:"kemet_get_post_title",nonce:kemetAddons.ajax_title_nonce}).done(function(e){t.append(new Option(e,o,!1,!0))})})):c.post(kemetAddons.ajax_url,{post_id:postID,action:"kemet_get_post_title",nonce:kemetAddons.ajax_title_nonce}).done(function(e){t.append(new Option(e,postID,!1,!0))})})}o=""!=kemetAddons.display_old_value?kemetAddons.display_old_value:"",e=""!=kemetAddons.hide_old_value?kemetAddons.hide_old_value:"";"object"==typeof o&&null!=o&&s(n.find(".kmt-display-on-specifics-select"),o),"object"==typeof e&&null!=e&&s(n.find(".kmt-hide-on-specifics-select"),e);n.find(".kmt-hide-on-specifics-select , .kmt-display-on-specifics-select").each(function(e,o){""==c(o=o).val()&&c(o).html(""),c(o).select2({placeholder:kemetAddons.search,ajax:{url:kemetAddons.ajax_url,dataType:"json",method:"post",delay:250,data:function(e){return{query:e.term,page:e.page,action:"kemet_ajax_get_posts_list",nonce:kemetAddons.ajax_nonce}},processResults:function(e){return{results:e}},cache:!0},minimumInputLength:2,language:kemetAddons.lang,width:"100%"}).on("change",function(e){var o=c(e.target).val();e.target.dispatchEvent(new CustomEvent("onCustomChange",{detail:{value:o}}))})});e=n.find(".display-on-rule , .hide-on-rule");e.select2({width:"100%"}).on("change",function(e){var o=c(e.target).val();e.target.dispatchEvent(new CustomEvent("onCustomChange",{detail:{value:o}}))}),e.each(function(e,o){var t=c(this).val();null!=t&&t.includes("specifics-location")?(c(o).hasClass("display-on-rule")?n.find("#display-on-specifics-location"):n.find("#hide-on-specifics-location")).css("display","block"):(c(o).hasClass("display-on-rule")?n.find("#display-on-specifics-location"):n.find("#hide-on-specifics-location")).css("display","none")}),e.on("change",function(){var e=c(this).val(),o=c(this);null!=e&&e.includes("specifics-location")?(c(o).hasClass("display-on-rule")?n.find("#display-on-specifics-location"):n.find("#hide-on-specifics-location")).css("display","block"):(c(o).hasClass("display-on-rule")?n.find("#display-on-specifics-location"):n.find("#hide-on-specifics-location")).css("display","none")}),n.find(".kmt-user-rules").select2({width:"100%"}).on("change",function(e){var o=c(e.target).val();e.target.dispatchEvent(new CustomEvent("onCustomChange",{detail:{value:o}}))});var d,a=c("#enable-code-editor").find("input");c("#kemet_code_editor");-1<(d=window.location.href).indexOf("&code_editor")||1==a.val()&&-1==d.indexOf("&wordpress_editor")?(a.parent().addClass("kfw--active"),c("body").addClass("kemet-code-editor"),a.val(1)):((-1<d.indexOf("&wordpress_editor")||0==a.val()||-1==d.indexOf("&code_editor"))&&(c("body").hasClass("kemet-code-editor")&&c("body").removeClass("kemet-code-editor"),a.parent().removeClass("kfw--active")),a.val(0)),a.change(function(){var e=c(this).val(),o=window.location.href;1==e?(-1<o.indexOf("&wordpress_editor")&&(o=o.replace("&wordpress_editor","")),window.location.replace(o+"&code_editor")):(-1<o.indexOf("&code_editor")&&(o=o.replace("&code_editor","")),o+="&wordpress_editor",window.location.replace(o))})})}(jQuery);